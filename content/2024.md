好久没写年终总结了，我觉得还是需要写一篇，因为如果不写，我会忘记每一年发生了什么。这个世界在不停地变化, 我觉得自己总是有一点"钝感"，就是对发生了什么总是迟一点才会感受到。就是那种两耳不闻窗外事，一心只在敲代码。

嗯，这边总结我们写几个方面吧，第一个方面是世界在发生什么，第二个方面是身边周围的人，第三个方面是自己的变化。

# 世界在发生什么

聊世界发生了什么的时候，我觉得可以关注一下经济。前一阵年末的时候，有一篇网上传播的很火的付鹏在汇丰银行的演讲。

## 经济形势

从全球经济的顶层来看，意识形态的变化尤为重要。全球的意识形态似乎正在加速左转。如果说“向右”是全球化，那么“向左”就是逆全球化。例如，增加关税、实施种族保护政策等，这些都是逆全球化的表现。

按照付鹏的说法，真正的经济影响并不是从疫情开始才显现的。事实上，在2019年，通过消费需求的数据分析，我们已经能看到需求已经到顶。宏观经济学中，供给和需求的关系至关重要。在2019年，供给和需求就已经失衡，经济增速已经见顶。

因此，国内经济的未来注定是下行的。而世界经济也在向左转，贸易保护主义愈加严重，这使得海外市场的商业环境变得非常困难。从GDP的构成来看，出口、投资、消费是三大支柱。现在房地产投资已经无望，贸易战影响着出口，国内消费也疲软。

比较悲观的看法是，我们正在重复日本失去的 30 年。

## 回头看 2021 年

2021年的时候发生了什么？2021年可能是我们公司离上市最近的一年。那个时候可能也是公司估值最高的一年。数据库基础软件这一赛道的公司得到了很多投资，行业整体向好。然而，随后的急转直下，也让人感到一阵寒意。

那个时候是疫情刚开始的时刻，然后我们国家早期采取的是封城的策略。其实疫情这个事情对对各个行业各个国家的影响是不一样的。最初，疫情对海外其他国家的影响更为严重，而中国则表现得相对较好，股市也因此迎来了高点。然而，随着时间的推移，海外市场迅速恢复，而中国则经历了三年的疫情封控，造成了更为严重的滞后效应。经济形势因此变得更加困难。

2021年到年末的时候已经急转直下了。在最高点加入公司的同学，会相对比较亏，期权就像等于废纸了。当然，就经济环境来讲，上市遥遥无期也是废纸。记得那年年会的时候，CEO 的说法是今年很难，随后会更难，这一年有可能是接下来几年中最好的一年。后续在更艰难的时刻，公司也发生了一波裁员，我对这些感受都比较后知后觉。直到今天，才可以感觉相对恢复了一些，主要还是靠海外市场打开局面，国内太卷了。

## 分配

关于“分蛋糕”这个话题，最难解决的方式之一就是我们和日本可能面临类似的局面——失去了30年的增长机会。而相比日本，我们的情况可能更加严峻：我们再也不会有高速增长的机会了。

过去我们的社会一直追求做大蛋糕，推动经济增长，解决问题时常会“先增长再分配”。因为只要在高速增长，很多的问题都可以被掩盖掉。房价贵不贵？贵，买不起，先贷款。那么涨几年，还贵不贵？收入的增长和房子的价值让负债显得也不是啥问题了。但是现在这样不行了，在没有增长的情况下能解决的方式就是切蛋糕，而不是做蛋糕。

其实对分蛋糕最块，其实是我是持悲观态度的。有些人想当然地觉得，国家遇到这么多的困难，要解决这些困难，一定会去分蛋糕，做一些改革一些调整，然后让经济能够重回正轨，重新正向循环起来。但事实上不是这样的，这其实只是底层人民一个很朴素的，很想当然的"想法"。

实际上，如果我们站在统治阶级，站在另一个角度去思考这个问题。那么如果没钱了，我肯定是想着怎么捞钱，而不是说怎么样解决问题。所以肯定是更加变本加利，不择手段的捞钱。比如说最近比较火的"远洋捕捞"，底层人民的未来生活环境只会更加地恶劣，更加地艰难。越是欠发达地区，这样的问题就会越严重，因为财政上没有钱，要搞钱肯定不是想怎么把经济整活，而是怎么整一点快钱。

## 改革的挑战

如果分配制度不改变，经济改革的成果必定会被吞噬。

很多人在抱怨社会的不公平，这很容易理解。但是我注意到一个很奇怪的现象，就是有不少体制内的退休的，也在抱怨社会的不公平，这个就很让人费解了。或许是因为他们处在体制内，所以他们见到的腐败更严重和真实？所以更愤慨？

有些贪官巨贪几个亿，拉出去砍了大家都会拍手称快。所以他们想当然觉得，问题的根源就是贪污腐败。这是一个问题，但还不是根源问题。多砍几个贪官，是不是好事情？是好事情。但是解决不解决根源问题？不解决。

庞大的体制内编制，臃肿的体制，才是问题。为什么大家都削尖脑袋往体制内钻？因为体制内好呀！

许多岗位，是由其国家的人民来“供养”的。花的是纳税人的钱，他们本身并不创造“价值”。而这些人觉得自己，每天要早起上班不迟到，一天要工作八个小时，忙忙碌碌，又要请示工作，又要打报告，又要写总结，要开会上传下达。敲黑板：忙碌不等于在创造价值！甚至可能在创造负面价值，给真正创造价值的人添堵。把这些人丢到体制外去，分分钟要失业下岗。他们早没有了在社会的生存能力，只能寄生在一颗大树下面。

就是他们，占据了庞大的人口，是真正的“蛀虫”而不自知。国家需要供养的人太多了，就没办法快步跑起来。国家必须为他们兜底，因为他们是统一战线的“同志”，其实是同一阶段，哪怕阶级内部矛盾因外部环境压力而日亦尖锐，这也是阶级内部矛盾。
分配制度改革的阻力就是这里，他们就是吃到了时代红利的人。改革就会动他们的蛋糕，要自己革自己的命的，我是从来没听过。

想起马科长呆萌的表情，"别讲了，别讲了"...

## 战争与全球冲突

矛盾和冲突的最激烈形式，就是战争。

如果不关心国际形式的话，好像战争离我们很遥远。但其实从世界范围看，俄罗斯打仗打了两年多了；中东那边以色列不停地搞事情；其实在世界范围很多国家都在打仗。只不过战争没有发生在中国，没有发生在中国本土。但是看冲突的严重和形势的变化，并不能排除武力收服台湾的可能性。突破西方封锁，放弃幻想，中美必有一战，几乎是共识了，只是从经济战，贸易战，会不会一直冲突上升到实体战争？

战争带来的世界局势的变化，俄罗斯和欧洲都是输家。俄罗斯持续放血，不打的时候就是军事世界第二，一打起来这个遮羞布就被撕破了，拉跨得狠。于是外汇全被冻结，消费出口被封锁，地中海的地盘也要保不住。而欧洲也被拖进去了，乌克兰能打那么久，难道是它自己能扛住？靠的是后方源源不断的武器供应。打仗后，失去了俄罗斯的能源供应，欧洲那边的能源短缺，成本上涨，对应的就是居民生活成本上涨，生活质量降低。

反观战争对经济的影响，比特币是涨得最多的，然后是黄金。一旦发生战争，这类的资产就是硬通货。我后悔自己太后知后觉，没有在局势早期就预见末来，囤一些保值增值的资产。所以总是只能写总结而不能写展望。

## 产能过剩

宏观经济学中会研究供需关系，对价格的影响，供给大于需求，或者叫产能过剩，这时能通过降价解决问题不？不能！中国是世界工厂，制造业很强盛，但是这个产能过剩了。

很天真的想法是，生产力很强，所以应该是价格降低，然后让所有人都买得起，于是生产力的提升改善人民的生活质量。但实际上不是这样子。资本主义制度下，资本家想把东西卖给你，是为了赚钱！它的目的不是让每个人都可以享受到更便宜的商品。比如说，牛奶产量过剩了，应该便宜卖掉么？不！宁可倒掉，也不能便宜卖，因为一旦进入便宜卖，就会亏钱。而倒掉只是把过剩的生产力去掉。

供过于求是什么？冰箱，彩电，洗衣机，空调...这些已经家庭人均都持有了，需求已经到顶，市场已经饱和，这就是生产力过剩。想要继续赚钱，继续卖得好，就必须卖到非洲，卖到更大的市场...但问题是中国的生产能力，全球的需求加一起都顶不住了。

资本家要赚钱，需要把商品卖出去。然而被资本家剥削得厉害，人民没有钱消费！钱已经都到资本家的口袋里面了。供给大于需求，有效的需求不足。现如今中国的状况也是一样的，有钱人占的比例太低了，他们有消费能力，但是能产生需求太少，也不能指望他们人均买10部,买100部的华为手机拉动经济对吧。而穷人呢？没钱！没钱咋消费？

通缩就是这样一个循环：产能过剩，东西卖不出去了。裁员，降本增效，被裁的员工没钱，没被裁的员工是惊弓之鸟，也不敢消费。经济继续下行，企业倒闭，更多人失业，更加缺少消费...

## 人口

人口老龄化，缺的是什么，缺人？缺的是劳动力么？错！看那些下岗的失业的，最不缺就是劳动力。缺的是消费者！为资本家买单的消费者！没有人买了，生产力过剩了，资本家还咋赚到更多的钱？伟大的马克思同志很早就洞见到了一些东西，而我则花很久才能理解。

过去的中国吃到了人口红利。人口红利是啥？可以从两个角度来看，人既是生产者，也是消费者。

- 从生者者的角度，我们可以提供大量廉价的劳动力，出口廉价劳动力就相当于国家在卖出"商品"，卖出商品就是赚钱的。而当劳动力成本上涨的时候，这个商品就不再物美价廉，于是这个“商品”就不好卖了，红利消失。
- 从消费者的角度，大量的人口提供了大量的消费者市场，有消费者才能产生需求，商品才能卖出。供给才能被消耗掉。

而老龄化是什么？老年人明显的没了生产能力，而消费能力也是减退的，他没了需求。低欲望低消费，经济就没有动力。老龄化是一种结构性失调，缺失年轻人导致人口红利的消失。

## 房子

马云说过，八年以后房价如葱。李超人也在好多年前就跑路了。这些都是先知先觉的。恒大破产了，万达日子不好过。普通人才后知后觉。

08 年，15 年，是涨得最吓人的。也是伴随大放水的。然后到 18 年，再往后就涨得缓了，依然在维持上升势头。直到后面彻底涨不动，由盛入衰。我自己是在 20 年那个阶段上了车。也就是，明显，买在山顶了。那个时候，这里买房还需要摇号，需要去抢。而换到 2024 这个时间点，大概能用更低的价格去买到更好的位置了吧。

为什么不更早呢？其实 15 年是最后能上车的时间点，抓不住，车门就基本关上了。毕业，出来晃悠几年，没有先知先觉就错失了机会。为什么不更晚呢？是因为要结婚了。其实 25-30岁，算是人生最重要的几年，再早，懵懵懂懂还没准备好，再晚，就错失了最好的时光。

85的是能吃到时代红利的，而隔几年92到95的这些就很艰难，00后就是完全没得选择，只能彻底躺平了。时代的一粒沙，落到个人身上就是一坐山。

从长远来看，一线城市这种大城市的房子，还是能保值的。而小城市，偏远小县城这种彻底熄火，流动性锁死。真实能支撑房价的是什么呢？是人均 GDP高，能吸引到人口正向流入，这才是真实的需求，是住而不是炒。人均 GDP 为什么高，是该地区发达，产业好。

过去谁忽悠我说，住房公积金是人生为数不多的加杠杆的手段，而房子就是少数几次资产翻翻的机会。我信你个鬼！在行情下跌的阶段，杠杆越大，死得越惨。我自己算是无所谓，没有在一线城市买房，所以没多少杠杆。想想一个月几万的贷款，如果一旦失业，现金流撑不到几个月就得断供，房子还是银行的，而负债是自己的。

即使买了房，也是透支了未来的 30 年，上有老下有小，就没有那么乐观。只要没被裁员，生活质量上也还行，这些都还是能扛。只是风险压满，危机意识重，焦虑，于是头发掉得更多了。

# 看看周围的人

看朋友圈感觉就是在看另一个平行宇宙。在某一个时间点，大家在同一所学校，或者在同一家公司，可能觉得就像是同一个起点(当然，背后可能是人与人之间的差异，比人与狗都大)。而后看各自的发展，就像是在看平行宇宙了。分类一下，大抵就是结婚的，和没结婚的；在国内的，和润了的；留在公司的，和寻找下一段征途的。

没结婚的生活似乎更丰富多彩一些，也更加"诗和远方"一些。有二次元的，有各地旅游打卡的，今天看个漫展，明天去个演唱会，让人羡慕。结了婚了大多都是晒娃，尤其是娃还小的时候。看下我自己的朋友圈，也大多都是晒娃的。

我自己是一个无趣的灵魂了，一个油腻的中年人。而身边的有趣的同事和前同事，还是很多。看那些润了的分享世界各地的生活，有澳洲，加拿大，欧洲...就感觉外面天确实像是蓝些，空气更新鲜。

还有一个很特立独行印象深刻的同事，是选择了房车旅游中国，主动"丁克"，没有软肋。攒个300w提前就退休，对财务自由的定义是够用的钱就行。不是为了工作而工作，直接开始享受自己的生活，岂不是美嗞嗞。这会儿说不准他还在云南某个风景秀丽的湖边写代码呢。

选择决定命运，anyway，祝大家都有光明的前程。感谢有你们，丰富了我有朋友圈，让我可以去幻想另一条平行宇宙中的时间线。

# 我自己的变化

抛开上面的一些宏大叙事，来说说个人生活习惯或者思维模式上的一些变化吧。

开始关心经济和全球形势，这个前面已经提过了。

## 科技

过去我认为，科学家是最伟大的，科技进步推动人类的发展。但是慢慢的，认知有一些转变。科技的进步并不一定让人类进步，也可能是更多人失业和被淘汰。而受益的可能仅仅是一小部分人，仅仅是最先享受到新的技术红利的那波人。
举个例子，古代的皇帝，什么都有人服务的情况下，一些东西对他的体感并不明显。同样的类比更上层阶级，在很多东西对他们本身很便利的情况下，他们对差异的感受并不明显。而如今，点个外卖就特别方便，这种便利其实是建立在有“人”在为你服务的基础上。而对于上层阶层，这种便利对他们体感并不明显，因为他们不需要点外卖。等科技继续进步了，连点外卖也不需要“人”了，那么送外卖这波人就彻底地淘汰了。

再比如网购和实体店的关系，曾经是一铺养三代，而如今网购的兴起和实体店生存空间被挤压，就是科技的进步一个事物淘汰另一个事物的过程。而且网络的边际成本比实体更低，实体的一家店只就辐射周边的多少米范围，网店的出现让全国的用户访问到。流量从一种形式转化成另一种形式了，大家购物的需求还在，只是流量都到了购物平台去了。“店铺”的形式发生了变化。

这个过程真正受益的人是谁呢？ 是一小波人，是拼多多是京东淘宝天猫这些...这些员工才占中国总人口比例的多少？而受害人是谁呢？传统的实体店，他们的生意不好做了...科技的进步实际上只让这一小部分人得到了利益，而更多的人并没有参与到利益分配。

recap:

- 科技进步对上层阶级的人带来的影响更小
- 受益的是一小部分优先享受到技术红利的人
- 同时会有另一部分被时代淘汰的受害者

## 尝试了一下 AI

今年开始尝试了一下AI的使用，比如说现在这篇文章，就不是之前的方式全部打字敲出来。有部分是用口述的方式，然后转成文本，再让ChatGPT帮我加工整理一下。

AI算是相对新的事物，我尝试得比较晚，因为 LLM 已经出来好久了，而我都没有第一时间去关注。等我开始关注到这些点，并且想看看它会带来什么改变的时候，LLM 都已经快发展到了其中一个瓶颈点期。模型参数、数据集规模与训练计算量带来的提升不再带来智能程度显著地 scale 了。刚开始有很多人找这个方向去创业，然后等到我再来看时，好多创业公司现在的情况并不太妙。

Nvidia是AI这边赚钱赚得盆满钵满的，相当于大家都在采金矿，而他是那个卖水的，因为AI时代大家都需要算力，然后算力的东西都离不开他们家。所以也可以看到反映在股价上面的走势。

然后AI的创业公司这边，AI的训练过程是很烧钱的，成本越来越高。如果没有成熟的变现的手段，那么这样子烧钱公司是烧不下去。一些公司已经在掉头，从研究大模型本身，到AI具体的产业应用上面。

所以现在这个阶段就是会从群雄逐鹿，到了下一个阶段。接下来不少公司，他们可能会活的不太理想，相当于从一个风口到了下一个风口，然后这个风口还没有开始爆炸，产生真正的那些巨头赢者通吃的巨头。

不过我相信这一波会产生一些新的变化出来，跟区块链，跟web3风口不一样，AI 这个风口会产生一些更根本的变化，会诞生出一些影响人类生活方方面面的东西出来。

## 尝试了一下 neovim 还是切回 emacs

之前有一段时间我试用了一下 neovim. 因为用emacs用了挺久了，有时候想换一换口味, 所以就去尝试了一下 neovim。

总的来讲 neovim 是跟 vim 其实完全不一样的哲学。如果说vim他是一个传统的编辑器，思想也是传统的，就是"做一件事情把这件事情做好"，那么 neovim，可以说他更更类似于emacs 的哲学吧。油管上面可以搜索到一个 [neovim philosophy](https://www.youtube.com/watch?v=wT-M6dEwcJ0&list=PLgyKcvZgfqDGntOOWuglUoOo9dMJilgLx&index=5) 的视频，“vim is not a shell or an operation system... this should work the other way around: use vim as a component from a shell or in an IDE...”，而 neovim 不是这样的。它是完完全全的提供了一个TUI，而不是一个基本的编辑器。这样就更符合我的口味一些，像是一个更现代，架构更先进的，不带太多legacy的emacs。

曾经很长一段时间我的工作模式是，一个浏览器，一个 emacs，一个 terminal。三者之间用 alt+tab 切换，一般是 terminal 下遍历到相应的目录，然后 e xxx 切到编辑器，e 是我做了一个 emacsclient 的 alias。
后来发现 terminal 放到编辑器内置是更舒适的，因为有编辑器的键位和复制粘贴可以使用，而窗口管理可以用编辑器的窗口。于是工作模式变成了两个，一个浏览器，一个 emacs。

当我把 neovim 配置得差不多之后发现，其实跟自己之前的 emacs 使用习惯并没有太大差异。而涉及到 lisp 部分的时候，还是 emacs 更舒适一下。于是折腾了一圈还是切回了 emacs。

## 工作方面

工作方面，今年主要的做的是 meta data 的管理，在我们内部有个项目叫 1M tables，就是让 tidb 支持这个量级下的表数量。其实背景是这样子的，有客户他们预期有非常多的租户，他们的租户模式是给每个租户一个库，每个库里面表不多，可能就平均3张表啥的。
但是他们租户的数量可能特别多，比如说 100w 租户，可能就对应 300w 的表。

tidb 正常的使用姿势不是设计成这样的，而是在 tikv 整体一个存储层，由 keyspace 来划分租户，每个租户对应有自己的 tidb 节点，tidb 是无状态灵活加减的，其实就是面向 cloud 的设计。但是对于这个客户的使用场景，这么干不行。
于是我们接了这个单子，有点定制化开发的味道。从另一个层面讲，也算是对产品边界能力的一个打磨吧。

正好前几天发了条朋友圈，就直接把一点感悟抄过来：

- 无限 scale 能力是一个伪命题，不管数据规模多少，它都有一个 meta 数据，meta 数据的 scale 就很难做
- 尤其是 meta 到规模上限的时候，*稳定性*太难了！并不是所有东西都能 O(1)，而 O(n) 就不 scale
    - 缓存意味着抖动，都懂。命中和未命中就是 `<10us` 到 `>1ms` 的区别。但大家不知道的是，对稳定性问题的影响它只算九牛的一根毛
    - 将100w表的元信息加载并解析json等步骤做下来，居然要 10min以上，哪怕尝试用最快的json库优化，这个速度也要3min。它是O(n)的
    - 100w表遍历一遍数据进行处理，任务周期性的遍历就是进程时刻 10G~20G 的内存波动。遍历是 O(n)
    - 遍历 meta 信息无法从需求侧消除，gcworker/region心跳/ttl/统计信息更新/http接口轮询，遍历带来的抖动(CPU,MEM)影响无可避免
    - 纯内存的btree，如果100w量级用加锁/遍历/解锁的姿势去做，延迟会到7-8s。带遍历操作时，如果核心数据结构基于锁则是无法 scale 的
    - 语言也会触及瓶颈。在 Go 语言中，800w 常驻对象的时候，GC 的 CPU 常态会在 200-300% 波动，随着对象数量上升这块抖动会越来越剧烈
- 好的产品是打磨出来的

这个事情这个阶段还没有看到结果。经历了许多项目以后，对软件生命期的理解越发深刻，从研发，到交付，一定要到用户反馈的时候，才是看到结果的时候。

## cora 项目的情况

今年我自己的业余项目cora，这个倒是更新了很多，今年连续从[0.2](cora-0.2.md) [0.3](cora-0.3.md)更新了好几个小版本。这块的研发开始越来越加速，就好像找到方向之后事情就进展的比较顺利。原本计划是想今年做到能拿它来搭建我的博客的，目前还是没有实现。

主要是缺乏一些基础库吧。目前我已经做了 sxml 的库以及 markdown 转换的库。在生态支持这块其他还是比较不容易的，基本上什么都得自己写。虽然说我按编译到C的实现，比较容易能够跟C语言交互，但是库太多了搞起来也是比较蛋疼，如果想到拿它搭建自己博客的程度，其实还是需要不少东西的。比如说基础的 json 解析，然后 sxml 的模板，还有像什么网络呀，http库各种，更不用说像字符串处理那种最最基础的库，工作量挺大的。

## 娃

看着小家伙一天天地成长，给我这个老父亲带来了巨大的满足。

我们家的宝宝看着不咋聪明的样子，至少跟我自己小时候比是差远了。1岁2个月学会走路，1岁半开始会喊爸爸了，然后没多久会喊妈妈，这些阶段都还落后得不太多。但是到了2岁多，还不会说话，连蹦几个词都不太行，身高体重也是属于那种中等偏下的，被周围的小朋友都甩到后面去了。

而且又不乖，问他要不要当乖乖宝贝他就摇头，问要不要读书他也摇头。问他想不想去幼儿园他说想，于是骗他，必须要当乖乖宝贝，只有乖乖宝贝才能去上幼儿园。时常我都想打他屁屁，但是看在可爱的份上也就忍了。

平时有大量的时间就是贡献给了这小家伙，周末都是围着娃在转的。一般的活动范围就是小区内逛逛，或者去去游乐场，动物园去了两次，再就是带出去外面逛逛超市，逛狂商场或者吃个饭。教他什么叫“下馆子”，他现在已经有一点概念了。去年过年带回娘家那边，算是出第一次远门，1岁4个多月吧。再大一点是带他坐第一次高铁，去了趟连云港，2岁2个月。

相比年轻的时候，能专注于技术的时间要减少挺多。现在娃每天都要午休，整个下午 2 点到 5 点差不多都是在睡觉的，于是我自己的自由时间也就是周末的这几个小时。而且娃的作息特别不好，每天到11点他都不愿意睡觉的，不好好吃，不好好睡，就不能好好长身体。等到 3 岁了一定得给他调过来。

洋洋洒洒写了不少字了，2024总结就这样吧。
