公司的办公电脑补助政策要调整了，以前是可以自己购买电脑然后报销，最近公司准备改成统一配备 macbook。我对新的 macbook 并不怎么感冒。
然后自己的 xps13 用了好些年了，于是想，要不在政策调整之前，自己换电脑然后走报销。

上学那会儿，我用的的是台式机。刚毕业不久换了一台 mac air。再到现在的公司一段时间后，换了 dell xps。最近几年都在家远程办公，没有背着笔记本上下班的需求。拿一台 macbook 的预算，可以装一台土豪配置的台式机了。不过我不太喜欢纯粹的台式那么笨重，占地方。于是把目光放到小主机。

记得最早见到 mac mini 的时候，蛮惊艳的。才 5000 块钱，体积那么小，性能却达到了笔记本的效果，头一次改变我了对“台式机”的认知。不过对于 apple 家的一体机，我倒不怎么感冒。单独买个主机，买个显示器，性价比要比他们家的一体机高多了。苹果这次的 CPU 更新据说挺猛的，所以搭载 M1 的 mac mini 也可以列为一个候选，好像日本那边不少消费者爱这么玩。

再然后是 intel 的 NCU，第一次见到这种东西是因为同事买了一个，比 mac mini 还要小！这玩意居然可以编程当开发机。而且相比 mac mini，它的内存条是可以自己换的，这样就不会被苹果的加钱升级配置给恶心到（壕无性价比）。比如可以很容易弄一个 32G 内存，花不了多少钱，想想都爽歪歪。

说到性价比，我继续对比了一些其它选项，比如 itx 小机箱。

如果单纯从体积小，那对应的选项应该是华擎的 deskmini，比 NCU 还要小，配置也更灵活，性价比更高了。[这篇文章](https://post.smzdm.com/p/a2593rvn/)就看得我都挺心动的。
但是我研究了一下发现，散热会是一个问题。机箱太小了就会限制散热能力，进而锁死 CPU 的配置上限。然后也研究了一下[机箱要怎么选](https://zhuanlan.zhihu.com/p/108172361)，

按照容量划分：

* 一般12L以下都算是迷你机箱
* 6L以下基本是极致迷你

极致迷你机箱多使用定制主板，或者nano-itx、STX主板。12-18L算是主流，很多ITX机箱都是这个大小。

    mini-itx = 17x17
    nano-itx = 12x12
    pico-itx = 10x7.2
    mini-stx = 14x14.7

6L 以下不支持独显。还有一个问题是，如果机箱实在太小了，是需要外接电源的，那么其实多带一个电源算上体积也是挺坑的，所以感觉大小的追求也没必要过于极致。

整理了一些网上看到了常见机箱的尺寸的数据：

* mac mini 大小是 2L
* 乔思伯v4 340x169x273 15.6L
* 乔思伯a4  340x169x273 15.6L  i9以下
* 乔思伯t8 218x160x242 可以ATX电源 8.5L
* 乔思伯u1plus 170x220x302 11L  散热到i7? 建议i5 3600以下
* 机械大师mc18 185x185x185 6.3L 散热只适合搭到i5?
* DENG F12 400 332x167x250 13.8L
* 银欣（SilverStone）RVZ03小乌鸦3 382x105x350 14L
* 迎广（IN WIN）肖邦 244x84x217 4.45L  3200 3400
* TU150 375x203x312 24L 可以上的i9   建议不带k i7 3700x以下
* 骨迦qbx 179x291x384  i9以下

乔伯思a4 基本上是一个可以搭载当前顶配 CPU 的尺寸，把电源和散热选好。因为大小的限制，对于散热，对于功耗，这些影响让 itx 并不适合太高的 CPU。

我想了想自己的需求。我想要一个常压的 CPU，而不是降压版的。像笔记本一般都是用的降压版的，因为要考虑到功耗影响，笔记本电池的供电限制了 CPU 的性能发挥。有一件印象很深事情，是我以前配置的很旧的一个台式机，编译性能吊打了 5 6 年以后出的新款的笔记本。那个台式带显示器大概就 5000 出头的价格，而笔记本大概 8000 多，当时是编译一个很大的项目，笔记本要编译 2-3 小时，台式差不多一小时搞定。所以经历这个事情之后，对于笔记本的 CPU 就没啥信心了，还好我是写 Go，不是写 Rust，凑合也还能用。然而，对于编译这个事情，提升体验感还是挺重要的，毕竟时间就是生命嘛。作为一个程序员，经常要编译项目的，换个好点的 CPU 省下来的时间，其价值应该是远大于 CPU 本身的价格了。应该至少到 intel i9 或者性能对标的 AMD 的 CPU 。

倒是不怎么需要独显，反正现在也没时间打游戏。又不挖矿，对于我来说，显卡就没啥意义了。开始我准备上 AMD 的 3700x 的，但是发现不带核显，后来发现了 4750g，这是个好东西，8核16线程和 3700x 一样，看测评性能比 3700x 还要猛。显卡可以省下来 2 3 千块钱，用来加内存条不香么？

内存一定要大。现在用的这台笔记本比较老了，还是 8G 的内存。其实我用 emacs 都还好，主要的吃内存的大头就是 chrome。tab 开多一点，就能卡死掉。我觉得内存 16G 眼下即使够用了，未来也不见得就真的够用。万一想双开个虚拟机啥的，都会吃掉很多内存的。所以作为主力开发机，至少 32G 以上才舒服，64G 应该差不多。常规的笔记本在这个年代(2021)应该是不会堆这么高内存了。我明明就是在配置一个工作站嘛(滑稽.jpg)。

关键点在于 CPU 和内存，主板够用就行， 550I 看起来差不多，华硕，微星或者其它家的。

机箱找到一款迎广(In Win) 的 B1，跟迎广的肖邦大小差不多，不过它内置 200w 电源，支持 4750g 应该是够的，我在网上看到[有人这么干](https://thegamepadgamer.com/2021/02/awesome-ryzen-7-pro-4750g-mini-itx-gaming-build/)了。

最终的配置清单如下：

- CPU： AMD Ryzen 7 PRO 4750G
- 主板：华硕ROG STRIX B550-I GAMING
- 内存：芝奇 3600MHz 32G x2
- SSD: 影驰 M2 1T SSD
- 散热器：猫头鹰（NOCTUA）NH-L9a-AM4
- 机箱：迎广（IN WIN）B1 黑色 itx机箱
